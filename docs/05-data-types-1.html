<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>STAT/COMP 212 - Wrangling: numerics, logicals, dates</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STAT/COMP 212</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-syallbus" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Syallbus</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-syallbus">    
        <li>
    <a class="dropdown-item" href="./syllabus_final.html" rel="" target="">
 <span class="dropdown-text">Final Syllabus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./syllabus_prelim.html" rel="" target="">
 <span class="dropdown-text">Preliminary Syllabus</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-activities" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Activities</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-activities">    
        <li>
    <a class="dropdown-item" href="./01-introductions.html" rel="" target="">
 <span class="dropdown-text">Welcome to the course!</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02-adv-ggplot.html" rel="" target="">
 <span class="dropdown-text">Advanced Data Visualization in ggplot2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-adv-maps.html" rel="" target="">
 <span class="dropdown-text">Advanced Spatial Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./workflow_files_rstudio.html" rel="" target="">
 <span class="dropdown-text">Workflow: Files and RStudio setup</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04-interactive-viz.html" rel="" target="">
 <span class="dropdown-text">Interactive visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./05-data-types-1.html" rel="" target="">
 <span class="dropdown-text">Wrangling: numerics, logicals, dates</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./06-data-types-2.html" rel="" target="">
 <span class="dropdown-text">Wrangling: strings</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./07-data-types-3.html" rel="" target="">
 <span class="dropdown-text">Wrangling: factors</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./08-functions-control-structs.html" rel="" target="">
 <span class="dropdown-text">Functions and control structures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./09-iteration.html" rel="" target="">
 <span class="dropdown-text">Loops and iteration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./10-apis.html" rel="" target="">
 <span class="dropdown-text">Data acquisition: APIs</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-homework" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Homework</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-homework">    
        <li>
    <a class="dropdown-item" href="./homework0.html" rel="" target="">
 <span class="dropdown-text">Homework 0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./homework1.html" rel="" target="">
 <span class="dropdown-text">Homework 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./homework2.html" rel="" target="">
 <span class="dropdown-text">Homework 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./homework3.html" rel="" target="">
 <span class="dropdown-text">Homework 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./homework4.html" rel="" target="">
 <span class="dropdown-text">Homework 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reflection1.html" rel="" target="">
 <span class="dropdown-text">Reflection 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./homework5.html" rel="" target="">
 <span class="dropdown-text">Homework 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./project.html" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./tech_setup.html" rel="" target="">
 <span class="menu-text">Tech Setup</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link active" data-scroll-target="#learning-goals">Learning goals</a></li>
  <li><a href="#object-classes" id="toc-object-classes" class="nav-link" data-scroll-target="#object-classes">Object classes</a></li>
  <li><a href="#numeric-data" id="toc-numeric-data" class="nav-link" data-scroll-target="#numeric-data">Numeric data</a>
  <ul class="collapse">
  <li><a href="#numeric-and-integer-classes" id="toc-numeric-and-integer-classes" class="nav-link" data-scroll-target="#numeric-and-integer-classes">Numeric and integer classes</a></li>
  <li><a href="#vector-recycling" id="toc-vector-recycling" class="nav-link" data-scroll-target="#vector-recycling">Vector recycling</a></li>
  <li><a href="#explicit-coercion" id="toc-explicit-coercion" class="nav-link" data-scroll-target="#explicit-coercion">Explicit coercion</a></li>
  <li><a href="#other-topics" id="toc-other-topics" class="nav-link" data-scroll-target="#other-topics">Other topics</a></li>
  </ul></li>
  <li><a href="#logical-data" id="toc-logical-data" class="nav-link" data-scroll-target="#logical-data">Logical data</a></li>
  <li><a href="#dates" id="toc-dates" class="nav-link" data-scroll-target="#dates">Dates</a></li>
  <li><a href="#open-ended-challenge-is-hillary-the-most-poisoned-baby-name-in-us-history" id="toc-open-ended-challenge-is-hillary-the-most-poisoned-baby-name-in-us-history" class="nav-link" data-scroll-target="#open-ended-challenge-is-hillary-the-most-poisoned-baby-name-in-us-history">Open-ended challenge: Is Hillary the most-poisoned baby name in US history?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Wrangling: numerics, logicals, dates</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="learning-goals" class="level1">
<h1>Learning goals</h1>
<p>After this lesson, you should be able to:</p>
<ul>
<li>Determine the class of a given object and identify concerns to be wary of when manipulating an object of that class (numerics, logicals, factors, dates, strings, data.frames)</li>
<li>Explain what vector recycling is, when it is used, when it can be a problem, and how to avoid those problems</li>
<li>Explain the difference between implicit and explicit coercion</li>
<li>Extract date-time information using the <code>lubridate</code> package</li>
<li>Write R code to wrangle data from these different types</li>
<li>Recognize several new R errors and warnings related to data types</li>
</ul>
<p><br></p>
<p>Slides for today are available <a href="./slides/05-data-types-1.html">here</a>. (For our main activity, we will be using the rest of the webpage below.)</p>
<p><br></p>
<p>You can download a template Quarto file to start from <a href="activity_templates/05-data-types-1.qmd">here</a>. Save this template within the following directory structure:</p>
<ul>
<li><code>your_course_folder</code>
<ul>
<li><code>wrangling_data_types</code>
<ul>
<li><code>code</code>
<ul>
<li><code>05-data-types-1.qmd</code></li>
</ul></li>
<li><code>data</code>
<ul>
<li>You’ll download data from Moodle later today.</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p><br><br><br></p>
</section>
<section id="object-classes" class="level1">
<h1>Object classes</h1>
<p>We got a taste of object <strong>classes</strong> when we worked with maps. Reading in spatial data from different data sources created objects of different classes.</p>
<p>For example, the <code>data_by_dist</code> object from our Shiny app is an <code>sf</code> object, which means that we can use the convenient <code>geom_sf()</code> within <code>ggplot</code>s to make maps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(data_by_dist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>[1] "sf"         "data.frame"</code></pre>
<p>An important object class in R is the <strong>vector</strong>. Each column of a data frame is actually a vector. In data science, the most common vector classes are <code>numeric</code>, <code>integer</code>, <code>logical</code>, <code>character</code>, <code>factor</code> and <code>Date</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lakers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lakers <span class="sc">%&gt;%</span> <span class="fu">select</span>(opponent))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lakers <span class="sc">%&gt;%</span> <span class="fu">pull</span>(opponent))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Why is this important? When looking at the documentation for a function, you will see that arguments are expected to be of a specific type (class). Examples:</p>
<ul>
<li><code>ggplot::scale_x_continuous()</code>: One option for the <code>breaks</code> argument is “A <em>numeric vector</em> of positions”</li>
<li><code>shiny::sliderInput()</code>: The <code>value</code> argument. “The initial value of the slider, either a number, a date (class Date), or a date-time (class POSIXt). A <em>length one vector</em> will create a regular slider; a <em>length two vector</em> will create a double-ended range slider. Must lie between min and max.”</li>
</ul>
<p><br><br><br></p>
</section>
<section id="numeric-data" class="level1">
<h1>Numeric data</h1>
<section id="numeric-and-integer-classes" class="level2">
<h2 class="anchored" data-anchor-id="numeric-and-integer-classes">Numeric and integer classes</h2>
<p>Numbers that we see in R are generally of the <code>numeric</code> class, which are numbers with decimals. The <code>c()</code> function below is a way to create a vector of multiple numbers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>R also has an <code>integer</code> class which will most often be formed when using the <code>:</code> operator to form regularly spaced sequences.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>integers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(integers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<p>It will be important to know how to check whether a number is a <code>numeric</code> or <code>integer</code> because we’ll be using the <code>purrr</code> package very shortly which checks types very strictly (e.g., <code>1</code> as an integer cannot be combined with <code>1</code> as a numeric)</p>
</section>
<section id="vector-recycling" class="level2">
<h2 class="anchored" data-anchor-id="vector-recycling">Vector recycling</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lakers <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, opponent, team, points))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      date opponent team points
1 20081028      POR  OFF      0
2 20081028      POR  LAL      0
3 20081028      POR  LAL      0
4 20081028      POR  LAL      0
5 20081028      POR  LAL      0
6 20081028      POR  LAL      2</code></pre>
</div>
</div>
<p>Suppose that we wanted to update just the first two <code>points</code> values (e.g., we learned of a typo).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>point_update <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>lakers2 <span class="ot">&lt;-</span> lakers <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">points =</span> points <span class="sc">+</span> point_update)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lakers<span class="sc">$</span>points)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lakers2<span class="sc">$</span>points)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 2 3 2 5</code></pre>
</div>
</div>
<p>Uh oh! It looks like the <code>2,3</code> point update vector got repeated multiple times. This is called <strong>vector recycling</strong>. If you are trying to combine or compare vectors of different lengths, R will repeat (recycle) the shorter one as many times as it takes to make them the same length. When the longer vector’s length isn’t a multiple of the smaller one, we’ll get a warning.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>point_update <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>lakers2 <span class="ot">&lt;-</span> lakers <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">points =</span> points <span class="sc">+</span> point_update)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `points = points + point_update`.
Caused by warning in `points + point_update`:
! longer object length is not a multiple of shorter object length</code></pre>
</div>
</div>
<p>In this case, the safest way to do the points update is to make sure that <code>point_update</code> has the same length as <code>points</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>lakers2 <span class="ot">&lt;-</span> lakers <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">play_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(lakers),</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">point_update =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>            play_id<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>            play_id<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.default =</span> <span class="dv">0</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">points =</span> points <span class="sc">+</span> point_update</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lakers2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, opponent, team, points))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      date opponent team points
1 20081028      POR  OFF      2
2 20081028      POR  LAL      3
3 20081028      POR  LAL      0
4 20081028      POR  LAL      0
5 20081028      POR  LAL      0
6 20081028      POR  LAL      2</code></pre>
</div>
</div>
<p>Recycling will very often come up when working with logical objects (Booleans):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(diamonds)<span class="sc">==</span><span class="st">"data.frame"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="st">"data.frame"</span> <span class="sc">%in%</span> <span class="fu">class</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">class</span>(diamonds)<span class="sc">==</span><span class="st">"data.frame"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="explicit-coercion" class="level2">
<h2 class="anchored" data-anchor-id="explicit-coercion">Explicit coercion</h2>
<p>In R there is a family of <strong>coercion</strong> functions that force a variable to be represented as a particular type. We have <code>as.numeric()</code> and <code>as.integer()</code> for numbers.</p>
<p>Most commonly we will use these when numbers have accidentally been read in as a <code>character</code> or a <code>factor</code>. (More on factors later.)</p>
<p>In the example below we have a set of 4 points values, but the last entry was mistakenly typed as a space in the spreadsheet (instead of as an empty cell). We can see when we display <code>points</code> that all of the values have quotes around them and that the class of the <code>points</code> object is a <code>character</code> vector. (More on working with <code>character</code> objects next time.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="st">" "</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>points</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2" "3" "0" " "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(points)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Most commonly we will have numeric data that happens to be read in as a character. After cleaning up the strings, we can use <code>as.numeric</code> to coerce the vector to a numeric vector. (More on strings and regular expressions later.) Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2.3"</span>, <span class="st">"3.4"</span>, <span class="st">"4.5"</span>, <span class="st">"5.6."</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.3 3.4 4.5  NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">.$"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.3 3.4 4.5 5.6</code></pre>
</div>
</div>
</section>
<section id="other-topics" class="level2">
<h2 class="anchored" data-anchor-id="other-topics">Other topics</h2>
<p>The <a href="https://r4ds.hadley.nz/numbers">Numbers</a> chapter in R4DS covers a lot of useful functions and ideas related to wrangling numbers. It would be very usefl to read this chapter. A glossary of the</p>
<ul>
<li><code>n()</code>, <code>n_distinct()</code></li>
<li><code>sum(is.na())</code></li>
<li><code>pmin(), pmax()</code> vs <code>min(), max()</code></li>
<li>Integer division: <code>%/%</code>. Remainder: <code>%%</code></li>
<li><code>round(), floor(), ceiling()</code></li>
<li><code>cut()</code></li>
<li><code>cumsum(), dplyr::cummean(), cummin(), cummax()</code></li>
<li><code>dplyr::min_rank()</code></li>
<li><code>lead(), lag()</code>: shift a vector by padding with NAs</li>
<li>Numerical summaries: <code>mean</code>, <code>median</code>, <code>min</code>, <code>max</code>, <code>quantile</code>, <code>sd</code>, <code>IQR</code></li>
</ul>
<p><br><br><br></p>
</section>
</section>
<section id="logical-data" class="level1">
<h1>Logical data</h1>
<p>(The <a href="https://r4ds.hadley.nz/logicals">Logical vectors</a> chapter in R4DS is a good supplemental reference.)</p>
<p>Logical data result from comparisons:</p>
<ul>
<li>Comparing numeric data uses the following operators
<ul>
<li><code>&gt;</code>, <code>&lt;</code>: greater and less than</li>
<li><code>&gt;=</code>, <code>&lt;</code>: greater and less than or equal to</li>
<li><code>==</code> exactly equal</li>
</ul></li>
<li>Characters
<ul>
<li><code>variable=="specific choice"</code></li>
<li><code>variable %in% c("choice1", "choice2", "choice3")</code></li>
</ul></li>
<li>Combining logical statements
<ul>
<li><code>&amp;</code>: and</li>
<li><code>|</code>: or</li>
</ul></li>
</ul>
<p>Example: filter to 3-pointers against the Minnesota Timberwolves (<code>MIN</code> team).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>lakers_subs <span class="ot">&lt;-</span> lakers <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(points<span class="sc">==</span><span class="dv">3</span> <span class="sc">&amp;</span> team<span class="sc">==</span><span class="st">"MIN"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>lakers_subs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       date opponent game_type  time period etype team            player result
1  20081214      MIN      home 00:04      1  shot  MIN        Ryan Gomes   made
2  20081214      MIN      home 05:56      2  shot  MIN    Rashad McCants   made
3  20081214      MIN      home 03:46      2  shot  MIN    Rashad McCants   made
4  20081214      MIN      home 08:34      3  shot  MIN       Mike Miller   made
5  20081214      MIN      home 00:30      3  shot  MIN        Ryan Gomes   made
6  20081214      MIN      home 11:16      4  shot  MIN Sebastian Telfair   made
7  20081214      MIN      home 03:21      4  shot  MIN       Mike Miller   made
8  20081214      MIN      home 02:28      4  shot  MIN       Mike Miller   made
9  20090130      MIN      away 09:10      1  shot  MIN        Randy Foye   made
10 20090130      MIN      away 03:25      1  shot  MIN        Ryan Gomes   made
11 20090130      MIN      away 06:30      2  shot  MIN        Randy Foye   made
12 20090130      MIN      away 08:22      4  shot  MIN     Rodney Carney   made
13 20090222      MIN      away 10:13      1  shot  MIN Sebastian Telfair   made
14 20090222      MIN      away 09:32      1  shot  MIN Sebastian Telfair   made
15 20090222      MIN      away 07:44      1  shot  MIN       Mike Miller   made
16 20090222      MIN      away 04:02      2  shot  MIN        Ryan Gomes   made
17 20090222      MIN      away 02:51      2  shot  MIN        Randy Foye   made
18 20090222      MIN      away 11:38      3  shot  MIN        Ryan Gomes   made
19 20090222      MIN      away 11:25      4  shot  MIN     Rodney Carney   made
20 20090222      MIN      away 02:07      4  shot  MIN       Mike Miller   made
21 20090222      MIN      away 01:36      4  shot  MIN        Ryan Gomes   made
22 20090222      MIN      away 00:09      4  shot  MIN        Randy Foye   made
23 20090306      MIN      home 07:55      1  shot  MIN Sebastian Telfair   made
24 20090306      MIN      home 08:42      2  shot  MIN     Rodney Carney   made
25 20090306      MIN      home 06:31      3  shot  MIN        Ryan Gomes   made
26 20090306      MIN      home 00:03      3  shot  MIN        Ryan Gomes   made
27 20090306      MIN      home 06:14      4  shot  MIN Sebastian Telfair   made
28 20090306      MIN      home 03:39      4  shot  MIN       Bobby Brown   made
   points type  x  y
1       3  3pt  2  7
2       3  3pt 48 16
3       3  3pt 43 24
4       3  3pt 47 23
5       3  3pt 27 33
6       3  3pt  9 26
7       3  3pt 44 23
8       3  3pt 49  5
9       3  3pt 23 32
10      3  3pt  2  7
11      3  3pt 47  8
12      3  3pt 48 12
13      3  3pt 48  7
14      3  3pt 47 18
15      3  3pt  2  6
16      3  3pt 20 31
17      3  3pt 47  9
18      3  3pt 47 19
19      3  3pt 48  8
20      3  3pt 47  9
21      3  3pt 35 29
22      3  3pt  8 25
23      3  3pt  2  6
24      3  3pt  2  8
25      3  3pt  3 18
26      3  3pt  5 22
27      3  3pt 25 32
28      3  3pt 24 34</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># These give the same results</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>lakers <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(points<span class="sc">==</span><span class="dv">3</span>, team<span class="sc">==</span><span class="st">"MIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       date opponent game_type  time period etype team            player result
1  20081214      MIN      home 00:04      1  shot  MIN        Ryan Gomes   made
2  20081214      MIN      home 05:56      2  shot  MIN    Rashad McCants   made
3  20081214      MIN      home 03:46      2  shot  MIN    Rashad McCants   made
4  20081214      MIN      home 08:34      3  shot  MIN       Mike Miller   made
5  20081214      MIN      home 00:30      3  shot  MIN        Ryan Gomes   made
6  20081214      MIN      home 11:16      4  shot  MIN Sebastian Telfair   made
7  20081214      MIN      home 03:21      4  shot  MIN       Mike Miller   made
8  20081214      MIN      home 02:28      4  shot  MIN       Mike Miller   made
9  20090130      MIN      away 09:10      1  shot  MIN        Randy Foye   made
10 20090130      MIN      away 03:25      1  shot  MIN        Ryan Gomes   made
11 20090130      MIN      away 06:30      2  shot  MIN        Randy Foye   made
12 20090130      MIN      away 08:22      4  shot  MIN     Rodney Carney   made
13 20090222      MIN      away 10:13      1  shot  MIN Sebastian Telfair   made
14 20090222      MIN      away 09:32      1  shot  MIN Sebastian Telfair   made
15 20090222      MIN      away 07:44      1  shot  MIN       Mike Miller   made
16 20090222      MIN      away 04:02      2  shot  MIN        Ryan Gomes   made
17 20090222      MIN      away 02:51      2  shot  MIN        Randy Foye   made
18 20090222      MIN      away 11:38      3  shot  MIN        Ryan Gomes   made
19 20090222      MIN      away 11:25      4  shot  MIN     Rodney Carney   made
20 20090222      MIN      away 02:07      4  shot  MIN       Mike Miller   made
21 20090222      MIN      away 01:36      4  shot  MIN        Ryan Gomes   made
22 20090222      MIN      away 00:09      4  shot  MIN        Randy Foye   made
23 20090306      MIN      home 07:55      1  shot  MIN Sebastian Telfair   made
24 20090306      MIN      home 08:42      2  shot  MIN     Rodney Carney   made
25 20090306      MIN      home 06:31      3  shot  MIN        Ryan Gomes   made
26 20090306      MIN      home 00:03      3  shot  MIN        Ryan Gomes   made
27 20090306      MIN      home 06:14      4  shot  MIN Sebastian Telfair   made
28 20090306      MIN      home 03:39      4  shot  MIN       Bobby Brown   made
   points type  x  y
1       3  3pt  2  7
2       3  3pt 48 16
3       3  3pt 43 24
4       3  3pt 47 23
5       3  3pt 27 33
6       3  3pt  9 26
7       3  3pt 44 23
8       3  3pt 49  5
9       3  3pt 23 32
10      3  3pt  2  7
11      3  3pt 47  8
12      3  3pt 48 12
13      3  3pt 48  7
14      3  3pt 47 18
15      3  3pt  2  6
16      3  3pt 20 31
17      3  3pt 47  9
18      3  3pt 47 19
19      3  3pt 48  8
20      3  3pt 47  9
21      3  3pt 35 29
22      3  3pt  8 25
23      3  3pt  2  6
24      3  3pt  2  8
25      3  3pt  3 18
26      3  3pt  5 22
27      3  3pt 25 32
28      3  3pt 24 34</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>lakers <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(points<span class="sc">==</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(team<span class="sc">==</span><span class="st">"MIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       date opponent game_type  time period etype team            player result
1  20081214      MIN      home 00:04      1  shot  MIN        Ryan Gomes   made
2  20081214      MIN      home 05:56      2  shot  MIN    Rashad McCants   made
3  20081214      MIN      home 03:46      2  shot  MIN    Rashad McCants   made
4  20081214      MIN      home 08:34      3  shot  MIN       Mike Miller   made
5  20081214      MIN      home 00:30      3  shot  MIN        Ryan Gomes   made
6  20081214      MIN      home 11:16      4  shot  MIN Sebastian Telfair   made
7  20081214      MIN      home 03:21      4  shot  MIN       Mike Miller   made
8  20081214      MIN      home 02:28      4  shot  MIN       Mike Miller   made
9  20090130      MIN      away 09:10      1  shot  MIN        Randy Foye   made
10 20090130      MIN      away 03:25      1  shot  MIN        Ryan Gomes   made
11 20090130      MIN      away 06:30      2  shot  MIN        Randy Foye   made
12 20090130      MIN      away 08:22      4  shot  MIN     Rodney Carney   made
13 20090222      MIN      away 10:13      1  shot  MIN Sebastian Telfair   made
14 20090222      MIN      away 09:32      1  shot  MIN Sebastian Telfair   made
15 20090222      MIN      away 07:44      1  shot  MIN       Mike Miller   made
16 20090222      MIN      away 04:02      2  shot  MIN        Ryan Gomes   made
17 20090222      MIN      away 02:51      2  shot  MIN        Randy Foye   made
18 20090222      MIN      away 11:38      3  shot  MIN        Ryan Gomes   made
19 20090222      MIN      away 11:25      4  shot  MIN     Rodney Carney   made
20 20090222      MIN      away 02:07      4  shot  MIN       Mike Miller   made
21 20090222      MIN      away 01:36      4  shot  MIN        Ryan Gomes   made
22 20090222      MIN      away 00:09      4  shot  MIN        Randy Foye   made
23 20090306      MIN      home 07:55      1  shot  MIN Sebastian Telfair   made
24 20090306      MIN      home 08:42      2  shot  MIN     Rodney Carney   made
25 20090306      MIN      home 06:31      3  shot  MIN        Ryan Gomes   made
26 20090306      MIN      home 00:03      3  shot  MIN        Ryan Gomes   made
27 20090306      MIN      home 06:14      4  shot  MIN Sebastian Telfair   made
28 20090306      MIN      home 03:39      4  shot  MIN       Bobby Brown   made
   points type  x  y
1       3  3pt  2  7
2       3  3pt 48 16
3       3  3pt 43 24
4       3  3pt 47 23
5       3  3pt 27 33
6       3  3pt  9 26
7       3  3pt 44 23
8       3  3pt 49  5
9       3  3pt 23 32
10      3  3pt  2  7
11      3  3pt 47  8
12      3  3pt 48 12
13      3  3pt 48  7
14      3  3pt 47 18
15      3  3pt  2  6
16      3  3pt 20 31
17      3  3pt 47  9
18      3  3pt 47 19
19      3  3pt 48  8
20      3  3pt 47  9
21      3  3pt 35 29
22      3  3pt  8 25
23      3  3pt  2  6
24      3  3pt  2  8
25      3  3pt  3 18
26      3  3pt  5 22
27      3  3pt 25 32
28      3  3pt 24 34</code></pre>
</div>
</div>
<p>In HW1, I saw a lot of the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>weather <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RecordP <span class="sc">==</span> <span class="st">"TRUE"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>weather <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RecordP <span class="sc">==</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Because <code>RecordP</code> was already of the <code>logical</code> class, the most concise way to perform the filtering is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>weather <span class="sc">%&gt;%</span> <span class="fu">filter</span>(RecordP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A caution about using <code>==</code> for numeric data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span> <span class="sc">/</span> <span class="dv">49</span> <span class="sc">*</span> <span class="dv">49</span>, <span class="fu">sqrt</span>(<span class="dv">2</span>) <span class="sc">^</span> <span class="dv">2</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x, <span class="at">digits =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9999999999999999 2.0000000000000004</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">near</span>(x, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE</code></pre>
</div>
</div>
<p>A caution about using <code>==</code> for <code>NA</code>s (use <code>is.na()</code> instead):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><br><br><br></p>
</section>
<section id="dates" class="level1">
<h1>Dates</h1>
<p>(The <a href="https://r4ds.hadley.nz/datetimes">Dates and times</a> chapter in R4DS is a good supplemental reference.)</p>
<p>The <code>lubridate</code> package contains useful functions for working with dates and times. The <code>lubridate</code> <a href="https://lubridate.tidyverse.org/reference/index.html">function reference</a> is a useful resource for finding the functions you need.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>lakers <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(lakers)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lakers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
     date opponent game_type time  period etype team  player result points type 
    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;
1  2.01e7 POR      home      12:00      1 jump… OFF   ""     ""          0 ""   
2  2.01e7 POR      home      11:39      1 shot  LAL   "Pau … "miss…      0 "hoo…
3  2.01e7 POR      home      11:37      1 rebo… LAL   "Vlad… ""          0 "off"
4  2.01e7 POR      home      11:25      1 shot  LAL   "Dere… "miss…      0 "lay…
5  2.01e7 POR      home      11:23      1 rebo… LAL   "Pau … ""          0 "off"
6  2.01e7 POR      home      11:22      1 shot  LAL   "Pau … "made"      2 "hoo…
# ℹ 2 more variables: x &lt;int&gt;, y &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>lakers <span class="ot">&lt;-</span> lakers <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">date =</span> <span class="fu">ymd</span>(date),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">time =</span> <span class="fu">hm</span>(time)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>lakers_clean <span class="ot">&lt;-</span> lakers <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">month =</span> <span class="fu">month</span>(date),</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">day =</span> <span class="fu">day</span>(date),</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">day_of_week =</span> <span class="fu">wday</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>),</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">minute =</span> <span class="fu">minute</span>(time),</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">second =</span> <span class="fu">second</span>(time)</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>lakers_clean <span class="sc">%&gt;%</span> <span class="fu">select</span>(year<span class="sc">:</span>second)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 34,624 × 6
    year month   day day_of_week minute second
   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;ord&gt;        &lt;dbl&gt;  &lt;dbl&gt;
 1  2008    10    28 Tue              0      0
 2  2008    10    28 Tue             39      0
 3  2008    10    28 Tue             37      0
 4  2008    10    28 Tue             25      0
 5  2008    10    28 Tue             23      0
 6  2008    10    28 Tue             22      0
 7  2008    10    28 Tue             22      0
 8  2008    10    28 Tue             22      0
 9  2008    10    28 Tue              0      0
10  2008    10    28 Tue             53      0
# ℹ 34,614 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>lakers_clean <span class="ot">&lt;-</span> lakers_clean <span class="sc">%&gt;%</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(date, opponent, period) <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(date, opponent, period, <span class="fu">desc</span>(time)) <span class="sc">%&gt;%</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_btw_plays_sec =</span> <span class="fu">as.numeric</span>(time <span class="sc">-</span> <span class="fu">lag</span>(time, <span class="dv">1</span>))</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>lakers_clean <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, opponent, time, period, diff_btw_plays_sec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 34,624 × 5
# Groups:   date, opponent, period [314]
   date       opponent time       period diff_btw_plays_sec
   &lt;date&gt;     &lt;chr&gt;    &lt;Period&gt;    &lt;int&gt;              &lt;dbl&gt;
 1 2008-10-28 POR      12H 0M 0S       1                 NA
 2 2008-10-28 POR      11H 39M 0S      1              -1260
 3 2008-10-28 POR      11H 37M 0S      1               -120
 4 2008-10-28 POR      11H 25M 0S      1               -720
 5 2008-10-28 POR      11H 23M 0S      1               -120
 6 2008-10-28 POR      11H 22M 0S      1                -60
 7 2008-10-28 POR      11H 22M 0S      1                  0
 8 2008-10-28 POR      11H 22M 0S      1                  0
 9 2008-10-28 POR      11H 0M 0S       1              -1320
10 2008-10-28 POR      10H 53M 0S      1               -420
# ℹ 34,614 more rows</code></pre>
</div>
</div>
</section>
<section id="open-ended-challenge-is-hillary-the-most-poisoned-baby-name-in-us-history" class="level1">
<h1>Open-ended challenge: Is Hillary the most-poisoned baby name in US history?</h1>
<p>Inspired by <a href="https://hilaryparker.com/2013/01/30/hilary-the-most-poisoned-baby-name-in-us-history/">this viral post</a> by an alumna of my PhD program, Hilary Parker, we will use baby name data from the Social Security Administration to investigate whether “Hilary” (or “Hillary”) is the most poisoned. Hilary defines “poisoning” as a sudden, rapid, and large decrease in the popularity of a name.</p>
<p><strong>Data:</strong> Download the baby names data from <a href="https://moodle.macalester.edu/mod/resource/view.php?id=40467">Moodle</a> and save this in the <code>data</code> folder for today.</p>
<p><strong>Your goal:</strong> Using whatever data wrangling tools necessary, try to answer this question with a combination of visualizations and numerical results.</p>
<p>Codebook:</p>
<ul>
<li><code>year</code></li>
<li><code>sex</code></li>
<li><code>name</code></li>
<li><code>n</code>: Number of babies with the given name and sex that year</li>
<li><code>prop</code>: Proportion of all US babies with the given name and sex that year</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stop to Reflect
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>As you progress through this open-ended challenge, make note of your <strong>process</strong>. How do you get started, get unstuck, take the next step in the analysis? In what areas do you tend to share insights for your peers? In what areas do your peers tend to contribute insights for you?</p>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© Leslie Myint, 2023<br> All content licensed under <img src="https://static.thenounproject.com/png/70967-200.png" height="20"> (<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>)</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Site built with <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>